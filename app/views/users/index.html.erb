<div class="content">
  <div class="page-header full-content bg-primary mb0">
    <div class="row">
      <div class="col-sm-6">
        <h1>Our Sports Community <small class="ml5"><%= User.all.count%> people</small></h1>
      </div><!--.col-->
      <div class="col-sm-6">
        <ol class="breadcrumb">
          <li><a href="/"><i class="ion-home"></i></a></li>
          <li><a href="<%= users_path %>" class="active">Our Community</a></li>
        </ol>
      </div><!--.col-->
    </div><!--.row-->
  </div><!--.page-header-->

  <div class="page-header full-content"  style="background: #fff; border-bottom: 1px solid #ccc;">
    <div class="row">
      <div clas="panel panel-default">
        <div class="panel-body">
          <div class="row">
            <div class="col-md-12">
              <div class="row">
                <div class="col-md-12 text-center mt10">
                  <h4 class="semi-bold">
                    <span class="ion-search text-primary h3 no-margin"></span>                   
                    <span class="h3 semi-bold ws1 ml10 no-margin">Search Our Sports Community</span>
                    <p class="small h6">
                      <ul class="inline-ul li-with-divider fs_14">
                        <li>Parents</li>
                        <li>Athletes</li>
                        <li>Student-Athletes</li>
                        <li>Coaches</li>
                        <li>Athletic Directors</li>
                        <li>Tournament Directors</li>
                      </ul> 
                  </h4>
                </div>
                <div class="col-md-6 col-md-offset-3 box-shadow-ccc"  style="background: #fff;">
                  <div class="padding-bottom-0">
                    <div class="inputer mt5 mb5 ml10">
                      <input type="text" class=" fs_20 quicksearch-users typeahead typeahead-users form-control" rows="1" placeholder="Enter user name...">
                    </div>
                  </div>
                </div>
              </div>
            </div><!--.col-md-9-->
          </div><!--.row-->
        </div>
      </div>
    </div>
  </div>

  <div class="bg-muted padding-top-40 padding-right-40 padding-left-40" style="background: #F7F7F7;">
    <div class="row users">
      <%= render @users %>
    </div>
  </div>
</div>
      

<script type="text/javascript">


// QUICKSEARCH USERS

$( function() {
  // quick search regex
  var qsRegex;
  
  // init Isotope
  var $grid = $('.users').isotope({
    itemSelector: '.element-item',
    layoutMode: 'fitRows',
    filter: function() {
      return qsRegex ? $(this).text().match( qsRegex ) : true;
    }
  });

  // use value of search field to filter
  var $quicksearch = $('.quicksearch-users').keyup( debounce( function() {
    qsRegex = new RegExp( $quicksearch.val(), 'gi' );
    $grid.isotope();
  }, 200 ) );
  
});

// debounce so filtering doesn't happen every millisecond
function debounce( fn, threshold ) {
  var timeout;
  return function debounced() {
    if ( timeout ) {
      clearTimeout( timeout );
    }
    function delayed() {
      fn();
      timeout = null;
    }
    timeout = setTimeout( delayed, threshold || 100 );
  }
}
</script>

